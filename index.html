<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Stock App</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>

  <script>
    //function that calls other functions depending on the data requested
    function handleInput(){
      stockTicker = document.getElementById('query').value;
  
      searchTicker(stockTicker);
    }

    //function for clearing search results
    function clearSearch(){
      //clear the search bar input
      document.getElementById('query').value ='';
    }
  
    async function searchTicker(ticker){
      console.log("got here!!!");
      console.log(ticker);

      //send request to node.js with the ticker, and store the returned JSON
      let companyJSON = await fetch('/search/' + ticker, {
	                method: 'GET',
                }).then((response) => response.json()).then(companyJSON => {return companyJSON});
      
      console.log(companyJSON);
      
      console.log("SEPARATINGGGGG")
      console.log(companyJSON.companyData)
      console.log(companyJSON.stockDetails)

      console.log("INDIVIDUAL DATA NOW")
      console.log(companyJSON.companyData.name)
      console.log(companyJSON.stockDetails.c)

    }
  </script>
</body>
</html>
